<?xml version="1.0"?><SWF><Header><width>780</width><height>600</height><backgroundcolor>16777215</backgroundcolor><fps>16</fps></Header><Elements><DBL><imagepath>C:\Desktop\universe\img\21\ball.dbl</imagepath><NamedId>ball</NamedId></DBL><ExportsAdd><refid>ball</refid><name>ball</name></ExportsAdd><DBL><imagepath>C:\Desktop\universe\img\21\bat.dbl</imagepath><NamedId>bat</NamedId></DBL><ExportsAdd><refid>bat</refid><name>bat</name></ExportsAdd><DBL><imagepath>C:\Desktop\universe\img\21\env.dbl</imagepath><NamedId>env</NamedId></DBL><ExportsAdd><refid>env</refid><name>env</name></ExportsAdd><SpriteNew><NamedId>0</NamedId></SpriteNew><SpriteAction><spriteid>0</spriteid><ac>
mc=attachMovie('draw',_name,getNextHighestDepth());
mc.onEnterFrame=function(){
this._x-=this._width/2;this._y-=this._height/2;
this.onEnterFrame=null;
//
var s=2*_height;
start_min=bat_top-s;
start_max=bat_top+s;
onEnterFrame=falling;
}

function falling(){
_y+=step;
if(_y&gt;start_max)_y=0;
}

var step=height/2/fps;
var start_frames=fps*3/2;

var start_min;var start_max;

function go(){
if(_y&lt;start_min)return undefined;
if(_x!=bat._x)return undefined;

var on=start_max-start_min;
var is=_y-start_min;
angle=30*is/on;angle=int(angle);
text.goes(angle,30);
//
f=0;radius=height;frames=start_frames;
//
inter();
//
onEnterFrame=move;
}

var angle;var sens;
var frames;var radius;
var center_y;
var prev_x;var x_var;var start_x;
function inter(){
sens=1;
center_y=_y+(radius*Math.sin(angle*Math.PI/180));
prev_x=radius*Math.cos(angle*Math.PI/180);
var x2=radius*Math.cos((angle+60)*Math.PI/180);
x_var=prev_x-x2;start_x=prev_x;
}

function move(){
test();
if(radius&lt;1){
onEnterFrame=falling;_y=0;bat._x=_x;
return undefined;
}
f+=sens;
//
var x=x_var*f/frames;
x=start_x-x;
var ang=Math.acos(x/radius)*180/Math.PI;
//
var y=radius*Math.sin(ang*Math.PI/180);
_y=center_y-y;
var dif_x=Math.abs(prev_x-x);
prev_x=x;
bat._x+=dif_x;env.move(dif_x);
}
function test(){
if(sens==1){
if(f&lt;frames)return undefined;
sens=-1;
}else{
if(f&gt;0)return undefined;
radius=radius/2+random(radius/4);
frames=start_frames*radius/height;
inter();
}
}</ac></SpriteAction><SpriteShowFrame><spriteid>0</spriteid></SpriteShowFrame><SpriteDone><spriteid>0</spriteid><NamedId>ball_inst</NamedId></SpriteDone><ExportsAdd><refid>ball_inst</refid><name>ball_inst</name></ExportsAdd><SpriteNew><NamedId>1</NamedId></SpriteNew><SpriteAction><spriteid>1</spriteid><ac>
mc=attachMovie('draw',_name,getNextHighestDepth());
mc.onEnterFrame=function(){
this._y-=this._height/2;
this.onEnterFrame=null;
}

var m=flash.display.BitmapData.loadBitmap(_name);
var h=m.height;
_y-=h;
var w=m.width;
var w_alt=w/2;

ball.bat_top=_y-w_alt;

var frames;
function start(){
frames=0;
onEnterFrame=move;
}

function move(){
frames++;

var n=frames/fps;

//r din 90
//frames din fps

//x din alternare
//frames din fps
var x=w_alt*n;

_rotation=0;
//foarte ciudat seteaza widthul fara asta

_width=w-x;
_rotation=90*n*-1;

if(frames==fps){
onEnterFrame=null;
ball.go();
}
}</ac></SpriteAction><SpriteShowFrame><spriteid>1</spriteid></SpriteShowFrame><SpriteDone><spriteid>1</spriteid><NamedId>bat_inst</NamedId></SpriteDone><ExportsAdd><refid>bat_inst</refid><name>bat_inst</name></ExportsAdd><SpriteNew><NamedId>2</NamedId></SpriteNew><SpriteAction><spriteid>2</spriteid><ac>var m=flash.display.BitmapData.loadBitmap(_name);
var w=m.width;var h=m.height;
beginBitmapFill(m,new flash.geom.Matrix(),false);
lineTo(w,0);lineTo(w,h);lineTo(0,h);
endFill();</ac></SpriteAction><SpriteShowFrame><spriteid>2</spriteid></SpriteShowFrame><SpriteDone><spriteid>2</spriteid><NamedId>draw</NamedId></SpriteDone><ExportsAdd><refid>draw</refid><name>draw</name></ExportsAdd><SpriteNew><NamedId>3</NamedId></SpriteNew><SpriteAction><spriteid>3</spriteid><ac>
var m=flash.display.BitmapData.loadBitmap('env');
var w=m.width;var h=m.height;

function add(a,b){
mc=createEmptyMovieClip('env'+a,getNextHighestDepth());
mc.beginBitmapFill(m,new flash.geom.Matrix(),false);
mc.lineTo(w,0);mc.lineTo(w,h);mc.lineTo(0,h);
mc.endFill();
mc._x-=b;
}

add(1,0);add(2,w);

function move(x){
env1._x+=x;env2._x+=x;
if(env2._x&gt;0){
env1._x=env2._x-w;
var a=env1;env1=env2;env2=a;
_root.counterBar_step();
}
}


</ac></SpriteAction><SpriteShowFrame><spriteid>3</spriteid></SpriteShowFrame><SpriteDone><spriteid>3</spriteid><NamedId>env_inst</NamedId></SpriteDone><ExportsAdd><refid>env_inst</refid><name>env_inst</name></ExportsAdd><SpriteNew><NamedId>4</NamedId></SpriteNew><SpriteAction><spriteid>4</spriteid><ac>
attachMovie('draw','ball',getNextHighestDepth());
createEmptyMovieClip('top',getNextHighestDepth());

function goes(a,b){
var y=a*_height/b;
y=_height-y;
top.clear();
top.lineStyle(2,0xff0000);
top.moveTo(0,y);
top.lineTo(_width,y);
}</ac></SpriteAction><SpriteShowFrame><spriteid>4</spriteid></SpriteShowFrame><SpriteDone><spriteid>4</spriteid><NamedId>info</NamedId></SpriteDone><ExportsAdd><refid>info</refid><name>info</name></ExportsAdd><ExportsDone></ExportsDone><Action><ac>_root.counterBar_init(10);
//10 widthuri

var width;var height;var fps;
var load_vars=new LoadVars();
load_vars.onLoad=function(success){
	if(success==true){
		width=this.width;height=this.height;fps=this.fps;
		afterVars();
	}
}
load_vars.load("vars.txt");

function afterVars(){

attachMovie('env_inst','env',getNextHighestDepth());

attachMovie('ball_inst','ball',getNextHighestDepth());
ball._x=width/2;
ball.fps=fps;ball.env=env;ball.height=height;

attachMovie('bat_inst','bat',getNextHighestDepth());
bat._x=ball._x;bat._y=height;
bat.fps=fps;bat.ball=ball;

ball.bat=bat;

//onPress, deocamdata, fara env. nu este.
onMouseDown=function(){bat.start();}

attachMovie('info','text',getNextHighestDepth());
ball.text=text;

}
</ac></Action><ShowFrame></ShowFrame></Elements></SWF>